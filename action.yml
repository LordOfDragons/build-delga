name: 'build-delga'
description: 'Build DELGA distribution file using DEIGDE CI'
branding:
  icon: 'box'
  color: 'purple'
inputs:
  projectFile:
    description: 'Path to the project-file to use (*.degp), within the repository.'
    required: true
    default: 'project.degp'
  profile:
    description: 'Name of profile to use.'
    required: true
    default: 'Release'
  logDir:
    description: 'Directory to store log files in.'
    required: false
    default: '${{ github.workspace }}/logs'
runs:
  steps:
    - name: Run DEIGDE
      uses: docker://lordofdragons/deigde-ci:latest
      volumes:
        - ${{ inputs.logDir }}:~/.config/deigde/logs
      args:
        - /github/workspace/${{ inputs.projectFile }}
        - --project.profile.distribute
        - ${{ inputs.profile }}
